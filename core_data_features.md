**Core Data Features and Calculations**

This document outlines the primary data points to be monitored for each gaming and lottery company in each state.

**1. Total Sales Volume**
    *   **Definition:** The total monetary value of all wagers placed or tickets sold by a company within a specific period.
    *   **Calculation Logic:** Sum of all individual sales transactions. `SUM(transaction_value)`.
    *   **Required Data Source(s)/API(s):**
        *   Gaming Companies' API: Endpoint providing gross sales data, ideally per transaction or summarized per period (e.g., daily, hourly).
    *   **Notes:** Needs to be clearly defined if this is gross sales before any deductions or prizes. Assuming gross sales.

**2. Amount Redeemed**
    *   **Definition:** The total monetary value of winnings paid out or prizes claimed by customers from a company within a specific period.
    *   **Calculation Logic:** Sum of all individual payout/redemption transactions. `SUM(payout_value)`.
    *   **Required Data Source(s)/API(s):**
        *   Gaming Companies' API: Endpoint providing data on winnings paid out or prizes redeemed.
    *   **Notes:** Important to ensure this only includes actual redemptions, not just 'winnings accrued but not yet claimed'.

**3. Amount Taxable**
    *   **Definition:** The portion of revenue that is subject to taxation.
    *   **Calculation Logic:** `Total Sales Volume - Amount Redeemed`.
    *   **Required Data Source(s)/API(s):** Derived from system calculations based on data from Gaming Companies' APIs.
    *   **Notes:** This is the current definition for Gross Gaming Revenue (GGR). The system should be designed to allow potential future modifications to this formula or its components if policy changes (e.g., inclusion of other deductible amounts). Admin configurability of the formula itself is a future consideration, but component values (like tax percentages) should be configurable.

**4. Amount Due to State Gov.**
    *   **Definition:** The calculated amount of tax revenue owed to the respective State Government.
    *   **Calculation Logic:** `Amount Taxable * State_Tax_Percentage`.
    *   **Required Data Source(s)/API(s):**
        *   System Calculation: Uses `Amount Taxable`.
        *   State Tax Percentage: This value is configurable by a Federal Super Admin on a per-state basis. The current rate used for calculation should be visible within the system. Needs input from government authorities for initial setup.
    *   **Notes:** The configurability and visibility of `State_Tax_Percentage` are critical. Admin (Federal Super Admin) should be able to configure this.

**5. Amount Due to FCT Admin**
    *   **Definition:** The calculated amount of tax revenue owed to the Federal Capital Territory Administration for companies based in the FCT.
    *   **Calculation Logic:** `Amount Taxable (for FCT based companies) * FCT_Tax_Percentage`.
    *   **Required Data Source(s)/API(s):**
        *   System Calculation: Uses `Amount Taxable` for companies identified as operating within the FCT.
        *   FCT Tax Percentage: This value is configurable by a Federal Super Admin. The current rate used for calculation should be visible within the system. Needs input from FCT authorities for initial setup.
    *   **Notes:** This applies specifically to FCT-based companies. The system needs a mechanism to identify such companies. The configurability and visibility of `FCT_Tax_Percentage` are critical. Admin (Federal Super Admin) should be able to configure this.

**6. Amount Invoiced**
    *   **Definition:** The total amount formally billed to the gaming company by the respective government bodies (State and/or FCT Admin) for taxes due.
    *   **Calculation Logic:** This is not directly calculated from sales/redeemed in real-time in the same way as "Amount Due". It represents a formal invoicing step.
        *   `SUM(state_invoices_issued) + SUM(fct_admin_invoices_issued)`.
    *   **Required Data Source(s)/API(s):**
        *   FIRS (for FCT) / State IRS API: Endpoint to fetch data on invoices issued to gaming companies.
        *   Alternatively, if the dashboard system itself generates invoices (less likely for a monitoring system), this would be an internal process. **Assumption:** Invoices are generated by FIRS/State IRS and fetched. Admin (Federal Super Admin for FCT, State Admin for their state) should have oversight.
    *   **Notes:** There might be a timing difference between when an amount is "due" and when it's "invoiced".

**7. Amount Paid**
    *   **Definition:** The total amount actually paid by the gaming company against the invoices.
    *   **Calculation Logic:** `SUM(payment_transactions_received)`.
    *   **Required Data Source(s)/API(s):**
        *   Banks / Payment Gateways API: To confirm receipt of payments.
        *   FIRS (for FCT) / State IRS API: May also have records of payments received against invoices.
    *   **Notes:** Reconciliation between invoiced amounts and amounts paid is key. Admin (Federal Super Admin for FCT, State Admin for their state) should have oversight.

**8. Outstanding Payments**
    *   **Definition:** The difference between the amount invoiced and the amount paid for a specific invoice or tax period.
    *   **Calculation Logic:** `Amount Invoiced - Amount Paid`.
    *   **Required Data Source(s)/API(s):** Derived from system calculations using data from FIRS (for FCT)/State IRS and Banks/Payment Gateways.
    *   **Notes:** This is a critical KPI for monitoring compliance and revenue collection. Admin (Federal Super Admin for FCT, State Admin for their state) should have oversight.

**9. Compliance Status**
    *   **Definition:** Indicates whether a gaming company is operating under a valid license.
    *   **Calculation Logic:**
        *   Check current date against `License_Expiry_Date`.
        *   Verify `License_Status` field (e.g., "Active", "Suspended", "Revoked").
    *   **Required Data Source(s)/API(s):**
        *   NLRC (National Lottery Regulatory Commission) API: Endpoint providing current license status, license number, issue date, and expiry date for each gaming company.
    *   **Notes:** This needs to be updated regularly. The definition of "unlicensed" vs. "licensed but expired" might be nuanced.

This document will guide the database schema design and the backend logic for data processing.
